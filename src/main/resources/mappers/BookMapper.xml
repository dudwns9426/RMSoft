<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rmsoft.mapper.BookMapper">

  <sql id="bookColumns">
    book_id,
    title,
    writer,
    publisher,
    price
  </sql>

  <!-- 도서 insert -->
  <insert id="insertBook" parameterType="BookDTO">
    INSERT INTO book (
      <include refid="bookColumns" />
    ) VALUES (
      null, <!-- Assuming no is auto-generated-->
      #{title, jdbcType=VARCHAR},
      #{writer, jdbcType=VARCHAR},
      #{publisher, jdbcType=VARCHAR},
      #{price}
    )
  </insert>
  
  <!-- 도서 전체 리스트 select -->
  <select id="selectBookList" parameterType="BookDTO" resultType="BookDTO">
    SELECT
    name
    FROM
    book
  </select>

  <!-- 도서 디테일 select -->
  <select id="selectBookDetail" parameterType="String" resultType="BookDTO">
    SELECT
    <include refid="bookColumns" />
    FROM
    book
    WHERE
    en_name = #{enName}
  </select>

  <!-- 도서 update(searchCount) -->
  <update id="updateBook" parameterType="BookDTO">
    UPDATE
    book
    SET
    search_count = #{searchCount}
    WHERE
    en_name = #{enName}
  </update>

  <!-- 도서 delete -->
  <delete id="deleteBook" parameterType="String">
    DELETE
    FROM
    book
    WHERE
    en_name = #{enName}
  </delete>



  <!-- 도서 select 총 갯수 -->
  <select id="selectBookTotalCount" parameterType="BookDTO" resultType="int">
    SELECT
    COUNT(*)
    FROM
    book
    WHERE
    en_name = #{enName}
  </select>

  <!-- 도서 영어이름, 설명 리스트 select -->
  <select id="selectBookEnList" resultType="BookDTO">
    SELECT
    en_name,
    explanation
    FROM
    book
    WHERE
    1=1
    ORDER BY search_count DESC
  </select>
</mapper>
